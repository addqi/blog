# Cocos ç¢°æ’ä¸ç‰©ç†ç³»ç»Ÿé€ŸæŸ¥ç¬”è®°

> æœ¬ç¬”è®°ç”¨äºå¿«é€Ÿç†è§£ **Cocos Creator 2.x ä¸ 3.x** ä¸­çš„
> **ç¢°æ’æ£€æµ‹ï¼ˆCollisionï¼‰** ä¸ **ç‰©ç†ç³»ç»Ÿï¼ˆPhysics / Rigidbodyï¼‰** çš„åŒºåˆ«ä¸ä½¿ç”¨æ–¹å¼ã€‚

---

## ä¸€ã€ç¢°æ’åŸºç¡€æ¦‚å¿µ

### 1ï¸âƒ£ ç¢°æ’å‘ç”Ÿçš„å‰æ

* **å¿…é¡»æœ‰ç¢°æ’ä½“ï¼ˆColliderï¼‰**
* è‡³å°‘ **ä¸¤ä¸ªç‰©ä½“çš„ç¢°æ’ä½“å‘ç”Ÿé‡å **

å¸¸è§ç¢°æ’ä½“ç±»å‹ï¼š

* `BoxCollider`ï¼ˆçŸ©å½¢ï¼‰
* `CircleCollider`ï¼ˆåœ†å½¢ï¼‰
* `PolygonCollider`ï¼ˆå¤šè¾¹å½¢ï¼‰

---

### 2ï¸âƒ£ åˆ†ç»„ä¸æ©ç ï¼ˆéå¸¸é‡è¦ï¼‰

* ç¢°æ’ä½“å¿…é¡» **åˆ†ç»„åŒ¹é…** æ‰ä¼šæ£€æµ‹åˆ°
* é€šè¿‡ **Group / Mask** æ§åˆ¶â€œè°å’Œè°èƒ½ç¢°æ’â€

ğŸ“Œ å¸¸è§ç”¨é€”ï¼š

* å­å¼¹åªæ‰“æ•Œäººï¼Œä¸æ‰“è‡ªå·±
* UI ä¸å‚ä¸ç‰©ç†ç¢°æ’
* è§¦å‘å™¨åŒºåŸŸæ£€æµ‹

---

## äºŒã€Cocos Creator 2.x ç¢°æ’ç³»ç»Ÿ

### 1ï¸âƒ£ çº¯ç¢°æ’æ£€æµ‹ï¼ˆä¸éœ€è¦ç‰©ç†æ•ˆæœï¼‰

âœ… **åªéœ€è¦ Collider**

```text
Collider + Collider  â†’  æœ‰ onCollisionEnter
```

* ä¸éœ€è¦ `RigidBody`
* ä¸å—é‡åŠ›ã€åŠ›ã€é€Ÿåº¦å½±å“
* å®Œå…¨æ‰‹åŠ¨æ§åˆ¶ä½ç§»

ğŸ“Œ é€‚åˆï¼š

* ç‚¹å‡»æ£€æµ‹
* æŠ€èƒ½èŒƒå›´
* UI / è§¦å‘åŒºåŸŸ

---

### 2ï¸âƒ£ éœ€è¦ç‰©ç†æ•ˆæœï¼ˆåå¼¹ / é‡åŠ› / æ¨åŠ¨ï¼‰

âœ… **å¿…é¡»æ·»åŠ  RigidBody**

```text
RigidBody + Collider  â†’  çœŸå®ç‰©ç†ç¢°æ’
```

* æœ‰é‡åŠ›
* æœ‰é€Ÿåº¦ã€åŠ é€Ÿåº¦
* æœ‰ç‰©ç†åé¦ˆï¼ˆå¼¹å¼€ã€æ»‘åŠ¨ï¼‰

ğŸ“Œ é€‚åˆï¼š

* å¹³å°è·³è·ƒ
* ç‰©ä½“æ‰è½
* å¼¹çƒã€æ¨ç®±å­

---

### 3ï¸âƒ£ 2.x ç¢°æ’å›è°ƒç¤ºä¾‹ä»£ç 

```ts
onCollisionEnter(other, self) {
    console.log('ç¢°æ’å¼€å§‹', other.node.name);
}

onCollisionStay(other, self) {
    console.log('æŒç»­ç¢°æ’ä¸­');
}

onCollisionExit(other, self) {
    console.log('ç¢°æ’ç»“æŸ');
}
```

---

## ä¸‰ã€Cocos Creator 3.x ç¢°æ’ä¸ç‰©ç†ç³»ç»Ÿ

> 3.x çš„è®¾è®¡æ€è·¯ **æ›´æ¥è¿‘ Unity**

### 1ï¸âƒ£ æ ¸å¿ƒè§„åˆ™ï¼ˆä¸€å®šè¦è®°ï¼‰

âœ… **è‡³å°‘æœ‰ä¸€ä¸ªç‰©ä½“æŒ‚ Rigidbody**

```text
Collider + Collider âŒï¼ˆé»˜è®¤ä¸è§¦å‘ï¼‰
Rigidbody + Collider âœ…ï¼ˆè§¦å‘ï¼‰
```

ğŸ“Œ å’Œ 2.x çš„æœ€å¤§åŒºåˆ«å°±åœ¨è¿™é‡Œ

---

### 2ï¸âƒ£ 3.x ä¸­çš„ç»„ä»¶å…³ç³»

* `Collider`ï¼šå®šä¹‰å½¢çŠ¶ï¼ˆBox / Sphere / Capsuleï¼‰
* `Rigidbody`ï¼šæ˜¯å¦å‚ä¸ç‰©ç†ç³»ç»Ÿ

```text
æƒ³è¦ onCollision / onTrigger
â†’ åœºæ™¯ä¸­å¿…é¡»æœ‰ Rigidbody
```

---

### 3ï¸âƒ£ 3.x ç¢°æ’ä»£ç ç¤ºä¾‹

```ts
import { _decorator, Component, Collider, ICollisionEvent } from 'cc';
const { ccclass } = _decorator;

@ccclass('CollisionTest')
export class CollisionTest extends Component {

    onLoad() {
        const collider = this.getComponent(Collider);
        if (collider) {
            collider.on('onCollisionEnter', this.onCollisionEnter, this);
            collider.on('onCollisionExit', this.onCollisionExit, this);
        }
    }

    onCollisionEnter(event: ICollisionEvent) {
        console.log('3.x ç¢°æ’å¼€å§‹', event.otherCollider.node.name);
    }

    onCollisionExit(event: ICollisionEvent) {
        console.log('3.x ç¢°æ’ç»“æŸ');
    }
}
```

---

## å››ã€Triggerï¼ˆè§¦å‘å™¨ï¼‰ vs Collisionï¼ˆç¢°æ’ï¼‰

### Triggerï¼ˆåªæ£€æµ‹ï¼Œä¸é˜»æŒ¡ï¼‰

* å‹¾é€‰ `IsTrigger`
* ä¸ä¼šäº§ç”Ÿç‰©ç†ååº”

ğŸ“Œ é€‚åˆï¼š

* è¿›å…¥åŒºåŸŸ
* æ‹¾å–é“å…·
* æ£€æµ‹èŒƒå›´

---

### Collisionï¼ˆçœŸå®ç¢°æ’ï¼‰

* ä¸å‹¾é€‰ `IsTrigger`
* ä¼šäº§ç”Ÿç‰©ç†é˜»æŒ¡å’Œåé¦ˆ

ğŸ“Œ é€‚åˆï¼š

* åœ°é¢
* å¢™ä½“
* å®ä½“ç‰©ä½“

---

## äº”ã€2.x ä¸ 3.x å¯¹æ¯”é€ŸæŸ¥è¡¨

| å¯¹æ¯”é¡¹            | Cocos 2.x   | Cocos 3.x |
| -------------- | ----------- | --------- |
| çº¯ç¢°æ’æ£€æµ‹          | åªè¦ Collider | âŒ é»˜è®¤ä¸è¡Œ    |
| æ˜¯å¦éœ€è¦ Rigidbody | å¯é€‰          | è‡³å°‘ä¸€ä¸ªå¿…é¡»    |
| è®¾è®¡æ€è·¯           | è½»é‡è‡ªå®šä¹‰       | æ¥è¿‘ Unity  |
| æ¨èç”¨æ³•           | UI / æŠ€èƒ½     | ç‰©ç†ç©æ³•      |

---

## å…­ã€ä½¿ç”¨å»ºè®®ï¼ˆé¢è¯•é«˜é¢‘æ€»ç»“ï¼‰

* **åªæƒ³çŸ¥é“â€œç¢°æ²¡ç¢°åˆ°â€**ï¼šç”¨ Trigger
* **éœ€è¦åå¼¹ / æ‰è½ / æ¨åŠ¨**ï¼šå¿…é¡» Rigidbody
* **2.x é¡¹ç›®**ï¼šçº¯ç¢°æ’å¯ä»¥ä¸åŠ åˆšä½“
* **3.x é¡¹ç›®**ï¼šè®°ä½ã€Œè‡³å°‘ä¸€ä¸ª Rigidbodyã€

---

### â­ ä¸€å¥è¯è®°å¿†ç‰ˆ

* **2.x**ï¼šCollider å°±èƒ½ç¢°
* **3.x**ï¼šæ²¡ Rigidbodyï¼Œä¸ç®—ç¢°

---

> ğŸ“Œ éå¸¸é€‚åˆï¼š
>
> * Cocos é¢è¯•
> * ä» 2.x å‡çº§ 3.x çš„å¼€å‘è€…
> * Unity è½¬ Cocos çš„åŒå­¦

---

## ä¸ƒã€ç¢°æ’ç³»ç»Ÿæ¥å£ï¼ˆCocos Creator 2.x çº¯ç¢°æ’ï¼‰

> æœ¬èŠ‚è¡¥å…… **CollisionManager æ¥å£ã€Debug ç»˜åˆ¶ã€åº•å±‚å›è°ƒæ•°æ®ç»“æ„**ï¼Œå±äº**æ–‡æ¡£çº§ / é¢è¯•åŠ åˆ†å†…å®¹**ã€‚

---

### 1ï¸âƒ£ è·å–å¹¶å¼€å¯ç¢°æ’æ£€æµ‹ç³»ç»Ÿ

```ts
const manager = cc.director.getCollisionManager();

// é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¿…é¡»æ‰‹åŠ¨å¼€å¯
manager.enabled = true;
```

ğŸ“Œ **æ³¨æ„**ï¼š

* ä¸å¼€å¯ `enabled`ï¼Œ`onCollisionXXX` **æ°¸è¿œä¸ä¼šè§¦å‘**
* è¿™æ˜¯ 2.x æ–°æ‰‹æœ€å¸¸è§å‘ä¹‹ä¸€

---

### 2ï¸âƒ£ ç¢°æ’ Debug å¯è§†åŒ–ï¼ˆå¼ºçƒˆæ¨èï¼‰

```ts
// æ˜¾ç¤ºç¢°æ’ä½“å½¢çŠ¶
manager.enabledDebugDraw = true;

// æ˜¾ç¤ºåŒ…å›´ç›’ï¼ˆAABBï¼‰
manager.enabledDrawBoundingBox = true;
```

ğŸ“Œ Debug æ¨¡å¼ä¸‹å¯ä»¥çœ‹åˆ°ï¼š

* ç¢°æ’ä½“çœŸå®å½¢çŠ¶
* ä¸–ç•Œåæ ‡ä¸‹çš„ AABB
* æ˜¯å¦å’Œä½ â€œä»¥ä¸ºçš„å¤§å°â€ä¸€è‡´

> ğŸ”¥ è°ƒè¯•ç¢°æ’é—®é¢˜ç¬¬ä¸€æ­¥ï¼š**å…ˆå¼€ DebugDraw**

---

## å…«ã€ç¢°æ’ç³»ç»Ÿå›è°ƒå‡½æ•°ï¼ˆæ ¸å¿ƒï¼‰

> å½“ç¢°æ’ç³»ç»Ÿæ£€æµ‹åˆ°ç¢°æ’æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨
> **æŒ‚åœ¨ç¢°æ’èŠ‚ç‚¹ä¸Šçš„è„šæœ¬å‡½æ•°**

---

### 1ï¸âƒ£ onCollisionEnterï¼ˆç¢°æ’å¼€å§‹ï¼‰

```ts
onCollisionEnter(other: cc.Collider, self: cc.Collider) {
    console.log('on collision enter');

    // ä¸–ç•Œåæ ‡ç›¸å…³æ•°æ®
    const world = self.world;

    // AABB åŒ…å›´ç›’ï¼ˆä¸–ç•Œåæ ‡ï¼‰
    const aabb = world.aabb;

    // ä¸Šä¸€å¸§çš„ AABB
    const preAabb = world.preAabb;

    // ä¸–ç•ŒçŸ©é˜µ
    const transform = world.transform;

    // åœ†å½¢ç¢°æ’å™¨ç‰¹æœ‰
    const radius = world.radius;
    const position = world.position;

    // çŸ©å½¢ / å¤šè¾¹å½¢ç‰¹æœ‰
    const points = world.points;
}
```

ğŸ“Œ **world å¸¸ç”¨å­—æ®µæ€»ç»“**

| å­—æ®µ         | è¯´æ˜           |
| ---------- | ------------ |
| `aabb`     | å½“å‰å¸§ä¸–ç•ŒåŒ…å›´ç›’     |
| `preAabb`  | ä¸Šä¸€å¸§åŒ…å›´ç›’       |
| `points`   | å¤šè¾¹å½¢ / Box é¡¶ç‚¹ |
| `radius`   | åœ†å½¢åŠå¾„         |
| `position` | åœ†å¿ƒä¸–ç•Œåæ ‡       |

---

### 2ï¸âƒ£ onCollisionStayï¼ˆæŒç»­ç¢°æ’ï¼‰

```ts
onCollisionStay(other: cc.Collider, self: cc.Collider) {
    console.log('on collision stay');
}
```

ğŸ“Œ å¸¸è§ç”¨é€”ï¼š

* æŒç»­ä¼¤å®³ï¼ˆæ¯’åœˆ / æ¿€å…‰ï¼‰
* è§’è‰²ä¸åœ°é¢æ¥è§¦æ£€æµ‹

---

### 3ï¸âƒ£ onCollisionExitï¼ˆç¢°æ’ç»“æŸï¼‰

```ts
onCollisionExit(other: cc.Collider, self: cc.Collider) {
    console.log('on collision exit');
}
```

ğŸ“Œ å¸¸è§ç”¨é€”ï¼š

* ç¦»å¼€åŒºåŸŸ
* çŠ¶æ€é‡ç½®ï¼ˆç¦»å¼€åœ°é¢ / ç¦»å¼€è§¦å‘åŒºï¼‰

---

## ä¹ã€ç‚¹å‡»æ£€æµ‹ï¼ˆéç‰©ç†ï¼Œçº¯æ•°å­¦ï¼‰

> ä½¿ç”¨ **Intersection å·¥å…·ç±»** è¿›è¡Œæ‰‹åŠ¨ç¢°æ’åˆ¤æ–­

---

### 1ï¸âƒ£ ç¤ºä¾‹ï¼šç‚¹å‡»æ˜¯å¦å‘½ä¸­ç¢°æ’ä½“

```ts
properties: {
    collider: cc.BoxCollider
},

start () {
    // å¿…é¡»å¼€å¯ç¢°æ’ç³»ç»Ÿï¼ˆworld æ•°æ®æ‰ä¼šæ›´æ–°ï¼‰
    cc.director.getCollisionManager().enabled = true;

    this.collider.node.on(cc.Node.EventType.TOUCH_START, (touch) => {
        // è·å–ä¸–ç•Œåæ ‡ç‚¹å‡»ç‚¹
        const touchLoc = touch.getLocation();

        // åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†…
        if (cc.Intersection.pointInPolygon(touchLoc, this.collider.world.points)) {
            console.log('Hit!');
        } else {
            console.log('No hit');
        }
    }, this);
}
```

---

### 2ï¸âƒ£ Intersection å¸¸ç”¨æ¥å£

| æ¥å£               | ç”¨é€”       |
| ---------------- | -------- |
| `pointInPolygon` | ç‚¹æ˜¯å¦åœ¨å¤šè¾¹å½¢å†… |
| `rectRect`       | çŸ©å½¢ä¸çŸ©å½¢    |
| `circleCircle`   | åœ†ä¸åœ†      |
| `polygonPolygon` | å¤šè¾¹å½¢ä¸å¤šè¾¹å½¢  |

ğŸ“Œ **ç‰¹ç‚¹**ï¼š

* ä¸ä¾èµ–ç‰©ç†ç³»ç»Ÿ
* æ€§èƒ½å¯æ§
* éå¸¸é€‚åˆ UI / ç‚¹å‡»æ£€æµ‹ / æŠ€èƒ½èŒƒå›´

---

## åã€é¢è¯•é«˜é¢‘æ€»ç»“ï¼ˆå¯ç›´æ¥èƒŒï¼‰

* **2.x ç¢°æ’ç³»ç»Ÿé»˜è®¤å…³é—­ï¼Œå¿…é¡»æ‰‹åŠ¨å¼€å¯**
* **DebugDraw æ˜¯æ’æŸ¥ç¢°æ’é—®é¢˜çš„ç¬¬ä¸€æ­¥**
* **onCollisionEnter / Stay / Exit ç”Ÿå‘½å‘¨æœŸéå¸¸æ¸…æ™°**
* **Intersection å±äºæ•°å­¦æ£€æµ‹ï¼Œä¸æ˜¯ç‰©ç†ç³»ç»Ÿ**

---

### â­ ä¸€å¥è¯ç»ˆææ€»ç»“

> **ç¢°æ’ = Collider + Manager + å›è°ƒ**
> **ç‰©ç† = Collider + Rigidbody + ç‰©ç†ä¸–ç•Œ**


# Cocos Creator 2.x ç‰©ç†ç³»ç»Ÿæ ¸å¿ƒç¬”è®°

## ä¸€ã€æ ¸å¿ƒç»„ä»¶

### 1. åˆšä½“ç»„ä»¶ (RigidBody)
ç‰©ç†ä¸–ç•Œçš„å®ä½“ï¼Œå†³å®šç‰©ä½“å¦‚ä½•è¿åŠ¨ã€‚
- **ç»„ä»¶å**ï¼š`cc.RigidBody`
- **ä½œç”¨**ï¼šä½¿èŠ‚ç‚¹å‚ä¸ç‰©ç†æ¨¡æ‹Ÿï¼Œå—é‡åŠ›ã€åŠ›ã€ç¢°æ’å½±å“ã€‚
- **å…³é”®å±æ€§**ï¼š`type`ï¼ˆåˆšä½“ç±»å‹ï¼‰ã€`gravityScale`ï¼ˆé‡åŠ›ç¼©æ”¾ï¼‰ã€`linearVelocity`ï¼ˆçº¿æ€§é€Ÿåº¦ï¼‰ã€‚

### 2. ç‰©ç†ç¢°æ’ä½“ç»„ä»¶ (PhysicsCollider)
å®šä¹‰ç‰©ä½“çš„ç‰©ç†å½¢çŠ¶ï¼Œç”¨äºç¢°æ’æ£€æµ‹ã€‚
- **å‘½åè§„åˆ™**ï¼š`Physics[Shape]Collider`
- **å¸¸è§ç±»å‹**ï¼š
  - `PhysicsBoxCollider`ï¼šçŸ©å½¢ç¢°æ’ä½“
  - `PhysicsCircleCollider`ï¼šåœ†å½¢ç¢°æ’ä½“
  - `PhysicsPolygonCollider`ï¼šå¤šè¾¹å½¢ç¢°æ’ä½“
- **ä¸æ™®é€šç¢°æ’ä½“åŒºåˆ«**ï¼šç‰©ç†ç¢°æ’ä½“ä»¥ `Physics` å¼€å¤´ï¼Œä¸“ç”¨äº**ç‰©ç†ç³»ç»Ÿ**ï¼›æ™®é€š `BoxCollider` ç­‰ç”¨äº**ç¢°æ’ç³»ç»Ÿ**ï¼ŒäºŒè€…æ•°æ®ä¸äº’é€šã€‚

## äºŒã€åˆšä½“ç±»å‹ (RigidBodyType)

| ç±»å‹ | æšä¸¾å€¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
| :--- | :--- | :--- | :--- |
| **Static** (é™æ€) | `cc.RigidBodyType.Static` | è´¨é‡æ— é™å¤§ï¼Œå®Œå…¨é™æ­¢ã€‚ç¢°æ’æ£€æµ‹æ•ˆç‡æœ€é«˜ã€‚ | åœ°é¢ã€å¢™ä½“ã€é™æ€éšœç¢ç‰© |
| **Dynamic** (åŠ¨æ€) | `cc.RigidBodyType.Dynamic` | å—ç‰©ç†å®šå¾‹å½±å“ï¼ˆé‡åŠ›ã€åŠ›ã€ç¢°æ’ï¼‰ã€‚è´¨é‡ã€é€Ÿåº¦å¯è®¾ç½®ã€‚ | ç®±å­ã€çƒã€è§’è‰²ï¼ˆéœ€ç²¾ç¡®ç‰©ç†æ¨¡æ‹Ÿæ—¶ï¼‰ |
| **Kinematic** (è¿åŠ¨å­¦) | `cc.RigidBodyType.Kinematic` | ä¸å—åŠ›å½±å“ï¼Œä½†å¯é€šè¿‡ä»£ç æ§åˆ¶é€Ÿåº¦ç§»åŠ¨ã€‚èƒ½æ¨åŠ¨Dynamicç‰©ä½“ã€‚ | ç§»åŠ¨å¹³å°ã€ç”µæ¢¯ã€ç”±ä»£ç æ§åˆ¶çš„æ•Œäºº |
| **Animated** (åŠ¨ç”») | `cc.RigidBodyType.Animated` | ä¸Kinematicç±»ä¼¼ï¼Œä½†ä½ç½®å’Œæ—‹è½¬å¯é€šè¿‡åŠ¨ç”»ï¼ˆå¦‚Animationç»„ä»¶ï¼‰é©±åŠ¨ã€‚ | ç»“åˆéª¨éª¼åŠ¨ç”»çš„ç‰©ç†ç‰©ä½“ |

## ä¸‰ã€ç‰©ç†ç¢°æ’ä½“ (PhysicsCollider) è¯¦è§£

### 1. é€šç”¨å±æ€§
- `density` (å¯†åº¦)ï¼šå½±å“åˆšä½“è´¨é‡ã€‚
- `friction` (æ‘©æ“¦åŠ›)ï¼š0(å…‰æ»‘) ~ 1(ç²—ç³™)ã€‚
- `restitution` (å¼¹æ€§)ï¼š0(æ— åå¼¹) ~ 1(å®Œå…¨åå¼¹)ã€‚
- `sensor` (ä¼ æ„Ÿå™¨)ï¼šè®¾ä¸º `true` æ—¶ï¼Œç‰©ä½“äº§ç”Ÿç¢°æ’æ£€æµ‹ä½†æ— ç‰©ç†é˜»æŒ¡ï¼Œç”¨äºè§¦å‘åŒºåŸŸã€‚ç›¸å½“äºè§¦å‘å™¨ã€‚

### 2. ä¸æ™®é€šç¢°æ’ä½“ (`cc.Collider`) çš„åŒºåˆ«

| ç‰¹æ€§ | ç‰©ç†ç¢°æ’ä½“ (`PhysicsCollider`) | æ™®é€šç¢°æ’ä½“ (`cc.Collider`) |
| :--- | :--- | :--- |
| **æ‰€å±ç³»ç»Ÿ** | **ç‰©ç†ç³»ç»Ÿ**ï¼Œä¸ `RigidBody` é…åˆ | **ç¢°æ’ç³»ç»Ÿ**ï¼Œç‹¬ç«‹å·¥ä½œ |
| **ä¾èµ–å…³ç³»** | é€šå¸¸éœ€è¦ `RigidBody` æ‰èƒ½ç”Ÿæ•ˆ | å¯å•ç‹¬å­˜åœ¨äºèŠ‚ç‚¹ä¸Š |
| **ç‰©ç†æ•ˆæœ** | æœ‰çœŸå®çš„ç¢°æ’åä½œç”¨åŠ› | ä»…åšå‡ ä½•ç›¸äº¤æ£€æµ‹ï¼Œæ— ç‰©ç†åé¦ˆ |
| **äº‹ä»¶ç›‘å¬** | `ç¢°æ’äº‹ä»¶`ï¼š`this.node.on(â€˜collision-enterâ€™, â€¦)` | `è§¦å‘äº‹ä»¶`ï¼š`this.node.on(â€˜trigger-enterâ€™, â€¦)` |
| **æ€§èƒ½å¼€é”€** | è¾ƒé«˜ï¼ˆå‚ä¸ç‰©ç†ä¸–ç•Œæ¨¡æ‹Ÿï¼‰ | è¾ƒä½ï¼ˆä»…åšæ•°å­¦è®¡ç®—ï¼‰ |

## å››ã€å·¥ä½œæµç¨‹

1. **åˆ›å»ºç‰©ç†èŠ‚ç‚¹**
   - æ·»åŠ  `RigidBody` ç»„ä»¶ï¼Œè®¾ç½® `type`ã€‚
   - æ·»åŠ  `Physics[Shape]Collider` ç»„ä»¶ï¼Œè°ƒæ•´å½¢çŠ¶ã€æ‘©æ“¦ã€å¼¹æ€§ç­‰ã€‚

2. **æ§åˆ¶ä¸å“åº”**
   - **æ–½åŠ åŠ›**ï¼š`rigidBody.applyForce(force, point)`
   - **è®¾ç½®é€Ÿåº¦**ï¼š`rigidBody.linearVelocity = cc.v2(x, y)`
   - **ç›‘å¬äº‹ä»¶**ï¼šåœ¨è„šæœ¬ä¸­ç›‘å¬ç‰©ç†ç¢°æ’äº‹ä»¶ã€‚

3. **åˆ†ç»„ç®¡ç†**
   - åœ¨ **é¡¹ç›®è®¾ç½® -> ç‰©ç†ç¢°æ’çŸ©é˜µ** ä¸­è®¾ç½®å“ªäº›åˆ†ç»„å¯ä»¥ç›¸äº’ç¢°æ’ã€‚

## äº”ã€ä»£ç ç¤ºä¾‹

```javascript
// 1. è·å–ç»„ä»¶
onLoad() {
    this.rigidBody = this.getComponent(cc.RigidBody);
    this.physicsCollider = this.getComponent(PhysicsBoxCollider);
}

// 2. åŠ¨æ€æ”¹å˜åˆšä½“ç±»å‹
changeToDynamic() {
    this.rigidBody.type = cc.RigidBodyType.Dynamic;
}

// 3. æ–½åŠ ä¸€ä¸ªå‘ä¸Šçš„åŠ›
applyJumpForce() {
    let force = cc.v2(0, 1000);
    this.rigidBody.applyForce(force, this.node.position);
}

// 4. ç›‘å¬ç‰©ç†ç¢°æ’äº‹ä»¶
start() {
    // ç¢°æ’å¼€å§‹
    this.node.on(â€˜collision-enterâ€™, this.onCollisionEnter, this);
    // ç¢°æ’æŒç»­
    this.node.on(â€˜collision-stayâ€™, this.onCollisionStay, this);
    // ç¢°æ’ç»“æŸ
    this.node.on(â€˜collision-exitâ€™, this.onCollisionExit, this);
}

onCollisionEnter(event, selfCollider, otherCollider) {
    console.log(â€˜ç¢°æ’å¼€å§‹â€™, otherCollider.node.name);
    // å¯é€šè¿‡ otherCollider è·å–å¯¹æ–¹ç‰©ç†å±æ€§
}

onDestroy() {
    this.node.off(â€˜collision-enterâ€™, this.onCollisionEnter, this);
}
```

## å…­ã€é‡è¦æç¤º

1. **ç³»ç»Ÿéš”ç¦»**ï¼šç‰©ç†ç¢°æ’ (`PhysicsCollider`) å’Œæ™®é€šç¢°æ’ (`cc.Collider`) æ˜¯ä¸¤å¥—ç‹¬ç«‹ç³»ç»Ÿï¼Œ**å®ƒä»¬ä¹‹é—´ä¸ä¼šå‘ç”Ÿä»»ä½•ç¢°æ’æ£€æµ‹**ã€‚
2. **å•ä½æ³¨æ„**ï¼šç‰©ç†ç³»ç»Ÿé»˜è®¤ä½¿ç”¨ **ç±³-åƒå…‹-ç§’ (MKS)** å•ä½åˆ¶ã€‚1ä¸ªå•ä½é•¿åº¦=1ç±³ï¼Œåˆç†è®¾ç½®é‡åŠ›ï¼ˆé»˜è®¤ -10 m/sÂ²ï¼‰å’ŒåŠ›çš„å¤§å°ã€‚
3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - é™æ€(`Static`)åˆšä½“æ€§èƒ½æœ€ä¼˜ã€‚
   - ç®€å•å½¢çŠ¶ï¼ˆçŸ©å½¢ã€åœ†å½¢ï¼‰æ¯”å¤šè¾¹å½¢æ€§èƒ½æ›´å¥½ã€‚
   - ä¸éœ€è¦ç‰©ç†åé¦ˆæ—¶ï¼Œä½¿ç”¨ä¼ æ„Ÿå™¨(`sensor=true`)æˆ–æ™®é€šç¢°æ’ç³»ç»Ÿã€‚
4. **è°ƒè¯•è§†å›¾**ï¼šåœ¨åœºæ™¯ç¼–è¾‘å™¨ä¸­ç‚¹å‡» **ç‰©ç†è°ƒè¯•** æŒ‰é’®ï¼Œå¯ç›´è§‚æŸ¥çœ‹æ‰€æœ‰ç‰©ç†ç¢°æ’ä½“çš„å½¢çŠ¶å’Œåˆšä½“çŠ¶æ€ã€‚
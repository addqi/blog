好的，我帮你整理一份 **Cocos Creator 2.x 视频系统笔记**，用 Markdown 格式，并补充一些平台差异和示例，方便学习和查阅。

---

# Cocos Creator 2.x 视频系统笔记（VideoPlayer）

## 1. 视频资源类型（Resource Type）

视频支持两种来源：

| Resource Type | 描述                   |
| ------------- | -------------------- |
| LOCAL (1)     | 本地视频资源（拖入 Assets 面板） |
| REMOTE (2)    | 远程视频 URL（网络视频）       |

> ⚠️ 注意：
>
> * LOCAL 视频通过 **Clip** 指定资源
> * REMOTE 视频通过 **Remote URL** 指定地址

---

## 2. VideoPlayer 属性说明

| 属性                     | 功能说明                                |
| ---------------------- | ----------------------------------- |
| **Resource Type**      | 视频来源类型（LOCAL 或 REMOTE）              |
| **Clip**               | 当 Resource Type 为 LOCAL 时，拖拽视频资源使用  |
| **Remote URL**         | 当 Resource Type 为 REMOTE 时，填入视频 URL |
| **Current Time**       | 指定从哪个时间点开始播放视频（秒）                   |
| **Volume**             | 音量范围 0.0 ~ 1.0                      |
| **Mute**               | 是否静音视频，静音时音量为 0，取消静音恢复原音量           |
| **Keep Aspect Ratio**  | 是否保持视频原始宽高比                         |
| **Is Fullscreen**      | 是否全屏播放视频（受平台限制）                     |
| **Stay On Bottom**     | 永远在游戏视图底层（仅 Web 平台有效）               |
| **Video Player Event** | 视频播放回调，包括播放中、暂停、停止、完成等事件            |

---

## 3. 平台限制与注意事项

* **不会默认直接播放**：创建或设置视频后，需要手动调用 `videoPlayer.play()` 才会播放
* **全屏支持**：

  * Web 平台可以全屏
  * 移动平台（iOS / Android）不支持全屏
* **UI显示**：

  * UI 节点可以显示在视频上
  * Web 平台可以控制视频层级
* **当前只支持 Web 平台播放远程视频**，移动平台需要本地视频资源
* **事件回调**：

  * 通过 `videoPlayer.on('ready-to-play', callback, this)` 等事件监听视频状态

---

## 4. 常用 API 示例

### 4.1 创建 VideoPlayer 并播放本地视频

```ts
const { ccclass, property } = cc._decorator;

@ccclass
export default class VideoExample extends cc.Component {

    @property(cc.VideoPlayer)
    videoPlayer: cc.VideoPlayer = null;

    start() {
        // 播放本地视频
        this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.LOCAL;
        this.videoPlayer.clip = cc.resources.get('videos/sample', cc.VideoClip);
        this.videoPlayer.play();

        // 设置音量
        this.videoPlayer.volume = 0.8;
        this.videoPlayer.mute = false;

        // 保持原始宽高比
        this.videoPlayer.keepAspectRatio = true;

        // 监听事件
        this.videoPlayer.node.on('completed', () => {
            console.log('视频播放完成');
        });
    }
}
```

### 4.2 播放远程视频（仅 Web 平台）

```ts
this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.REMOTE;
this.videoPlayer.remoteURL = "https://example.com/video.mp4";
this.videoPlayer.play();
```

---

## 5. 事件列表

| 事件              | 描述          |
| --------------- | ----------- |
| `ready-to-play` | 视频加载完成，可以播放 |
| `meta-loaded`   | 视频元数据加载完成   |
| `playing`       | 视频正在播放      |
| `paused`        | 视频暂停        |
| `stopped`       | 视频停止        |
| `completed`     | 视频播放完成      |
| `error`         | 视频播放错误      |

**示例：监听播放完成事件**

```ts
this.videoPlayer.node.on('completed', () => {
    console.log('视频播放结束，执行下一步逻辑');
}, this);
```

---

## 6. 注意事项

1. **Web 平台远程视频**可能受浏览器策略影响（如自动播放限制）
2. **音量控制与静音**：

   * 设置 `mute = true` 时音量自动为 0
   * 恢复静音时需要手动恢复音量值
3. **视频层级**：

   * `stayOnBottom = true` 时视频总是在 Canvas 下层
   * UI 可覆盖视频
4. **播放控制**：

   * `play()`, `pause()`, `stop()`, `seek(time)`

---

如果你需要，我可以帮你整理一份 **“视频系统与触摸事件结合操作（播放/拖动/缩放）”** 的示例笔记，适合 Web 游戏开发快速使用。

你希望我整理吗？
